---
import Layout from "../../../layouts/Layout.astro";
import Pager from "../../../components/organisms/pager.astro";
import Icon from "../../../components/atoms/icon.astro";
import { getAllContents } from "../../../libs/microcms";
import type { GetStaticPathsOptions } from "astro";

type Icon = {
  id: string;
  title: string;
  enTitle: string;
  image: { url: string; width: number; height: number };
};

export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
	const ICONS_PER_PAGE = 48;
  const res = await getAllContents<Icon>("icons");
  const icons = res.contents;

  return paginate(icons, {
    pageSize: ICONS_PER_PAGE,
    params: {},
    props: {
      totalCount: res.totalCount,
			perPage: ICONS_PER_PAGE,
    },
  });
}

const { page, totalCount, perPage } = Astro.props as {
  page: { data: Icon[] };
  totalCount: number;
	perPage: number;
};


const icons = page.data;
---

<Layout title="Web制作の実績｜デザインもできるフロントエンドエンジニアのポートフォリオ" breadcrumb={true} isIconsPage={true} navigation={true}>
  <main class="inner relative pt-[96px] sm:pt-[48px] pb-[120px] sm:pb-[64px]">
    <ul class="icon-list grid grid-cols-8 sm:grid-cols-3 gap-[48px] sm:gap-[32px]">
      {icons.map((icon) => (
        <li class="relative text-center">
          <div class="expand-img max-w-[64px] sm:max-w-[48px] mx-auto duration">
            <img src={icon.image.url} alt={icon.title} class="w-full" />
          </div>
          <p class="whitespace-nowrap mt-[12px] text-[12px] sm:text-[10px] leading-none tracking-[0.06em] font-black">{icon.title}</p>
          <p class="whitespace-nowrap mt-[6px] bracket text-[10px] sm:text-[10px] leading-none tracking-[0.06em] font-bold">{icon.enTitle}</p>
          <button class="expand-btn bg-[#F5F5F6] text-[12px] sm:text-[10px] font-bold leading-none tracking-[0.04em] pt-[4px] pb-[6px] mt-[12px] block w-full text-[#0079C9] opacity-hover duration">
            拡大<Icon filename="icon_fullscreen" color="#0079C9" customClass="w-[14px] ml-[4px] sm:w-[12px] align-text-top sm:ml-[2px]"/>
          </button>
        </li>
      ))}
    </ul>
    <div class="mt-[48px]">
      <Pager page={page} totalCount={totalCount} basePath="/works/icon" perPage={perPage} />
    </div>
				<div class="mt-[48px] sm:mt-[24px]">
		</div>
  </main>
</Layout>
